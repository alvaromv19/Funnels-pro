<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>(1) Mensaje Nuevo - NO CIERRES</title>
    
    <style>
        body { margin: 0; padding: 0; font-family: sans-serif; background: #fff; overflow-x: hidden; }
        
        /* CAPA DE BLOQUEO VISUAL (Para forzar clic inicial) */
        #overlay-start {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9);
            z-index: 9999; display: flex; justify-content: center; align-items: center; color: white; flex-direction: column;
            cursor: pointer;
        }
        
        .pulse-button {
            background: red; color: white; padding: 20px 40px; font-size: 24px; border: none; border-radius: 50px;
            animation: pulse 1s infinite; margin-top: 20px; font-weight: bold; box-shadow: 0 0 20px red;
        }

        /* VSL CONTAINER */
        .content { padding: 20px; text-align: center; display: none; } /* Oculto hasta que den click */
        
        .sticky-alert {
            position: fixed; top: 0; width: 100%; background: yellow; color: black; padding: 10px; 
            font-weight: bold; text-align: center; border-bottom: 2px solid red; z-index: 100;
        }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <div id="overlay-start" onclick="activarTrampas()">
        <h1>‚ö†Ô∏è VERIFICACI√ìN REQUERIDA</h1>
        <p>Haz clic para confirmar que eres humano y ver el video.</p>
        <button class="pulse-button">VER AHORA ‚û§</button>
    </div>

    <div class="content" id="main-content">
        <div class="sticky-alert">üî• 345 personas est√°n viendo esto ahora</div>
        <br><br>
        <h1>EL SECRETO REVELADO</h1>
        <p>Intenta volver atr√°s o cerrar la p√°gina...</p>
        
        <div style="height: 1500px; background: #eee; margin-top: 20px; padding: 20px;">
            <h3>Scroll hacia abajo para ver m√°s...</h3>
            </div>
    </div>

    <script>
        // ESTADO GLOBAL
        let trampasActivadas = false;
        // URL a la que los mandar√°s si intentan ir atr√°s (Tu "Oferta Irresistible" o Downsell)
        const URL_DESTINO_BACK = "https://www.google.com/search?q=oferta+ultima+oportunidad"; 

        // 1. FUNCI√ìN DE ACTIVACI√ìN (El usuario "firma su sentencia" al dar clic)
        function activarTrampas() {
            document.getElementById('overlay-start').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            
            // Solicitar pantalla completa para ser m√°s intrusivo (opcional)
            // document.documentElement.requestFullscreen().catch((e)=>{});
            
            trampasActivadas = true;
            cargarHistorialFalso();
            iniciarSonidoFantasma();
        }

        // 2. EL "SECUESTRO" DEL BOT√ìN ATR√ÅS (History API Manipulation)
        function cargarHistorialFalso() {
            // Empujamos estados al historial para crear un "bucle"
            history.pushState(null, document.title, location.href);
            history.pushState(null, document.title, location.href);
            
            window.addEventListener('popstate', function (event) {
                if (trampasActivadas) {
                    // Evitamos que se vayan
                    history.pushState(null, document.title, location.href);
                    
                    // OPCI√ìN A: Redirigir agresivamente a otra landing
                     window.location.href = URL_DESTINO_BACK;
                    
                    // OPCI√ìN B (M√°s sucia): Mostrar un 'confirm' nativo que congela el navegador
                    // if(confirm("***************************************\n¬°ESPERA! \n\nTENEMOS UNA OFERTA DEL 90% \n\n¬øQuieres verla antes de irte?\n***************************************")) {
                    //    window.location.href = URL_DESTINO_BACK;
                    // }
                }
            });
        }

        // 3. INTENTO DE CIERRE DE PESTA√ëA (onbeforeunload)
        // Esto hace que el navegador pregunte "¬øSeguro que quieres salir?"
        window.onbeforeunload = function (e) {
            if (trampasActivadas) {
                // Cancelar el evento est√°ndar
                e = e || window.event;
                
                // Texto antiguo (IE/Edge viejo) - Chrome moderno lo ignora pero hay que ponerlo
                var mensaje = "¬°TIENES UN BONO PENDIENTE! ¬øSeguro que quieres perderlo?";
                
                // Vibraci√≥n t√°ctil si es m√≥vil (funciona en Android Chrome)
                if(navigator.vibrate) navigator.vibrate([500, 200, 500]);
                
                // Para navegadores viejos
                if (e) { e.returnValue = mensaje; }
                
                // Para navegadores modernos (retorna el di√°logo gen√©rico)
                return mensaje;
            }
        };

        // 4. SONIDO SILENCIOSO (Audio Context Hack)
        // Mantiene la pesta√±a "activa" en algunos navegadores para que no la hibernen
        function iniciarSonidoFantasma() {
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            gainNode.gain.value = 0.0001; // Casi inaudible
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            oscillator.start();
        }

        // 5. DETECTOR DE MOUSE SALIENDO (Desktop)
        document.addEventListener("mouseout", function(e) {
            if (e.clientY < 0 && trampasActivadas) {
               // Aqu√≠ podr√≠as lanzar un modal HTML (popup)
               // alert("¬°ESPERA! ¬°NO TE VAYAS!"); // Alert nativo (muy molesto/efectivo)
            }
        });

    </script>
</body>
</html>
